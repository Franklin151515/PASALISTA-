<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Escanear QR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- QR Code JS -->
    <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="card shadow">
        <div class="card-body text-center">
            <h2 class="card-title text-primary mb-4">üì∑ Escanea el c√≥digo QR para registrar tu asistencia</h2>
            
            <div id="qr-reader" style="width: 300px; margin: auto;"></div>
            
            <p id="mensaje-camara" class="mt-3 text-danger"></p>
            
            <button onclick="iniciarQR()" class="btn btn-success mt-3">
                <i class="bi bi-camera"></i> Iniciar escaneo
            </button>
        </div>
    </div>
</div>

<!-- Opcional: Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<script>
function iniciarQR() {
    document.getElementById('mensaje-camara').textContent = "";
    const qrReader = document.getElementById('qr-reader');
    qrReader.innerHTML = "";

    const html5QrCode = new Html5Qrcode("qr-reader");
    html5QrCode.start(
        { facingMode: "environment" },
        {
            fps: 10,
            qrbox: 250
        },
        qrCodeMessage => {
            html5QrCode.stop();
            window.location.href = qrCodeMessage;
        },
        errorMessage => {
            // Opcional: puedes mostrar errores temporales
        }
    ).catch(err => {
        document.getElementById('mensaje-camara').textContent = "‚ùå No se encontr√≥ c√°mara o no se pudo acceder.";
    });
}
</script>

</body>
</html>